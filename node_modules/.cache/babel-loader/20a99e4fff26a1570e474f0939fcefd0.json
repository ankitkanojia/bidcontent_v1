{"ast":null,"code":"'use strict';\n\nvar path = require('path');\n\nvar pathKey = require('path-key');\n\nmodule.exports = function (opts) {\n  opts = Object.assign({\n    cwd: process.cwd(),\n    path: process.env[pathKey()]\n  }, opts);\n  var prev;\n  var pth = path.resolve(opts.cwd);\n  var ret = [];\n\n  while (prev !== pth) {\n    ret.push(path.join(pth, 'node_modules/.bin'));\n    prev = pth;\n    pth = path.resolve(pth, '..');\n  } // ensure the running `node` binary is used\n\n\n  ret.push(path.dirname(process.execPath));\n  return ret.concat(opts.path).join(path.delimiter);\n};\n\nmodule.exports.env = function (opts) {\n  opts = Object.assign({\n    env: process.env\n  }, opts);\n  var env = Object.assign({}, opts.env);\n  var path = pathKey({\n    env: env\n  });\n  opts.path = env[path];\n  env[path] = module.exports(opts);\n  return env;\n};","map":null,"metadata":{},"sourceType":"script"}