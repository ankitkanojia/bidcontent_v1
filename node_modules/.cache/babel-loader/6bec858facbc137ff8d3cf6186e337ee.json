{"ast":null,"code":"'use strict'; // See http://www.robvanderwoude.com/escapechars.php\n\nvar metaCharsRegExp = /([()\\][%!^\"`<>&|;, *?])/g;\n\nfunction escapeCommand(arg) {\n  // Escape meta chars\n  arg = arg.replace(metaCharsRegExp, '^$1');\n  return arg;\n}\n\nfunction escapeArgument(arg, doubleEscapeMetaChars) {\n  // Convert to string\n  arg = \"\".concat(arg); // Algorithm below is based on https://qntm.org/cmd\n  // Sequence of backslashes followed by a double quote:\n  // double up all the backslashes and escape the double quote\n\n  arg = arg.replace(/(\\\\*)\"/g, '$1$1\\\\\"'); // Sequence of backslashes followed by the end of the string\n  // (which will become a double quote later):\n  // double up all the backslashes\n\n  arg = arg.replace(/(\\\\*)$/, '$1$1'); // All other backslashes occur literally\n  // Quote the whole thing:\n\n  arg = \"\\\"\".concat(arg, \"\\\"\"); // Escape meta chars\n\n  arg = arg.replace(metaCharsRegExp, '^$1'); // Double escape meta chars if necessary\n\n  if (doubleEscapeMetaChars) {\n    arg = arg.replace(metaCharsRegExp, '^$1');\n  }\n\n  return arg;\n}\n\nmodule.exports.command = escapeCommand;\nmodule.exports.argument = escapeArgument;","map":null,"metadata":{},"sourceType":"script"}